(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[898],{2403:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/import-sub-account",function(){return n(2334)}])},2334:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var a=n(2322),s=n(7190),r=n(7993),i=n(3641),o=n(2784),u=n(6797),p=n(5354),l=n(9374),y=n(9310),d=n(8409),c=n(7852),m=n(4792),b=n(8535),f=n(3156),w=n(6940),h=n(3284),g=n(5875);let x=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function v(e){let{sdk:t,subAccount:n}=e,[s,r]=(0,o.useState)(),i=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider(),a=await e.request({method:"eth_accounts"});console.log("customlogs: accounts",a);try{let e=(0,u.v)({chain:d.L,transport:(0,p.d)()}),t=(0,h.Q)({transport:(0,p.d)("https://api.developer.coinbase.com/rpc/v1/base-sepolia/S-fOd2n2Oi4fl4e1Crm83XeDXZ7tkg8O")}),s=(0,g.E)({account:n,client:e,transport:(0,p.d)("https://api.developer.coinbase.com/rpc/v1/base-sepolia/S-fOd2n2Oi4fl4e1Crm83XeDXZ7tkg8O"),paymaster:t}),i=await s.sendUserOperation({calls:[{to:n.address,data:(0,f.R)({abi:x,functionName:"addOwnerAddress",args:[a[0]]}),value:(0,w.NC)(0)}]});console.info("response",i),r(i)}catch(e){console.error("error",e)}},[t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Add Global Owner"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",overflow:"auto",whiteSpace:"pre-wrap",children:JSON.stringify(s,null,2)})]})}function O(e){let{sdk:t,subAccount:n}=e,[s,r]=(0,o.useState)(null),i=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider();await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,w.eC)(84532)}]});let a=await e.request({method:"wallet_addSubAccount",params:[{version:"1",account:{type:"deployed",address:n.address,chainId:d.L.id}}]});console.info("response",a),r(a.address)},[t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Add Address Deployed"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",children:s})]})}function C(e){let{sdk:t,subAccount:n}=e,[s,r]=(0,o.useState)(null),i=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider();await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,w.eC)(84532)}]});let a=await n.getFactoryArgs(),s=await e.request({method:"wallet_addSubAccount",params:[{version:"1",account:{type:"undeployed",address:n.address,factory:null==a?void 0:a.factory,factoryData:null==a?void 0:a.factoryData}}]});console.info("response",s),r(s.address)},[t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Add Address Undeployed"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",children:s})]})}function k(e){let{sdk:t}=e,[n,s]=(0,o.useState)(),r=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider(),n=await e.request({method:"eth_requestAccounts"});console.info("response",n),s(n)},[t]);return(0,o.useEffect)(()=>{t&&t.getProvider().on("accountsChanged",e=>{0===e.length?s(void 0):s(e)})},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:r,children:"Connect"}),n&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",children:JSON.stringify(n,null,2)})]})}function S(e){let{sdk:t,subAccount:n}=e,[s,r]=(0,o.useState)(),i=(0,o.useCallback)(async()=>{if(t)try{let e=(0,u.v)({chain:d.L,transport:(0,p.d)()}),t=(0,h.Q)({transport:(0,p.d)("https://api.developer.coinbase.com/rpc/v1/base-sepolia/S-fOd2n2Oi4fl4e1Crm83XeDXZ7tkg8O")}),a=(0,g.E)({account:n,client:e,transport:(0,p.d)("https://api.developer.coinbase.com/rpc/v1/base-sepolia/S-fOd2n2Oi4fl4e1Crm83XeDXZ7tkg8O"),paymaster:t}),s=await a.sendUserOperation({calls:[]});console.info("response",s),r(s)}catch(e){console.error("error",e)}},[t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Deploy SubAccount"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",overflow:"auto",whiteSpace:"pre-wrap",children:JSON.stringify(s,null,2)})]})}function A(e){let{sdk:t,subAccountAddress:n}=e,[s,r]=(0,o.useState)(),i=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider();try{let t=await e.request({method:"personal_sign",params:[(0,w.NC)("Hello, world!"),n]});console.info("response",t),r(t)}catch(e){console.error("error",e)}},[t,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Personal Sign"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",overflow:"auto",whiteSpace:"pre-wrap",children:JSON.stringify(s,null,2)})]})}function j(e){let{sdk:t,subAccount:n}=e,[s,r]=(0,o.useState)(),i=(0,o.useCallback)(async()=>{if(!t)return;let e=t.getProvider();try{let t=await e.request({method:"wallet_sendCalls",params:[{chainId:d.L.id,from:n.address,calls:[],version:"1",capabilities:{paymasterService:{url:"https://api.developer.coinbase.com/rpc/v1/base-sepolia/S-fOd2n2Oi4fl4e1Crm83XeDXZ7tkg8O"}}}]});console.info("response",t),r(t)}catch(e){console.error("error",e)}},[t,n.address]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z,{w:"full",onClick:i,children:"Send Calls"}),s&&(0,a.jsx)(b.xu,{as:"pre",w:"full",p:2,bg:"gray.900",borderRadius:"md",border:"1px solid",borderColor:"gray.700",overflow:"auto",whiteSpace:"pre-wrap",children:JSON.stringify(s,null,2)})]})}function M(){let[e,t]=(0,o.useState)(),[n,m]=(0,o.useState)(),[b,f]=(0,o.useState)(!1);async function w(e){let t=(0,y.L)(e),n=(0,u.v)({chain:d.L,transport:(0,p.d)()});return await (0,l.px)({client:n,owners:[t]})}return(0,o.useEffect)(()=>{let e=(0,c.J)(),n=(0,y.L)(e),a=(0,i.N)({appName:"CryptoPlayground",preference:{keysUrl:"http://localhost:3005/connect",options:"smartWalletOnly"},subAccounts:{toOwnerAccount:()=>Promise.resolve({account:n})}});a&&((async()=>{let t=await w(e);f(await t.isDeployed()),m(t)})(),t(a),a.getProvider().on("accountsChanged",e=>{console.info("accountsChanged",e)}))},[]),(0,a.jsx)(s.W,{mb:16,children:(0,a.jsxs)(r.g,{w:"full",spacing:4,children:[(0,a.jsx)(k,{sdk:e}),b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{sdk:e,subAccount:n}),(0,a.jsx)(v,{sdk:e,subAccount:n}),(0,a.jsx)(A,{sdk:e,subAccountAddress:null==n?void 0:n.address}),(0,a.jsx)(j,{sdk:e,subAccount:n})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{sdk:e,subAccount:n}),(0,a.jsx)(C,{sdk:e,subAccount:n})]})]})})}},7852:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var a=n(1133);function s(){let e=localStorage.getItem("cbwsdk.demo.add-sub-account.pk");return e||(e=(0,a.w)(),localStorage.setItem("cbwsdk.demo.add-sub-account.pk",e)),e}}},function(e){e.O(0,[712,355,888,774,179],function(){return e(e.s=2403)}),_N_E=e.O()}]);